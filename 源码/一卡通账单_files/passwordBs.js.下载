define(function(require, exports, module) {
	
	var utils = require('utils');
	
    var bs = {
        api: {
            
        	// 页面模型
            pageModel: 'modepage/password.do',
            
         	// 修改密码表单
            changePwdFormAction: 'changePwdForm',
            
            // 修改密码Url
            changePwdUrl: 'api/changePassword.do'
            	
        },
        
        // 初始化表单
        initForm: function($form) {
        	
        	var self = this;
        	
        	var model = WIS_EMAP_SERV.getModel(self.api.pageModel, self.api.changePwdFormAction, 'form');
        	
            $form.emapForm({
            	data : model,
            	readonly : false,
            	mode : 'L'
            });
            
        },
        
        // 提交修改密码
        changePwd: function(formData) {
        	
        	return this._commonSimpleAjax(this.api.changePwdUrl, formData);
        	
        },
        
        // 通用的ajax事件
        _commonSimpleAjax: function(url, params){
        	
            var def = $.Deferred();
            
            utils.doAjax(url, params || {}).done(function(data) {
            	
                def.resolve(data);
                
            }).fail(function(res) {
            	
                def.reject(res);
                
            });
            return def.promise();
            
        }
    };
    return bs;
});